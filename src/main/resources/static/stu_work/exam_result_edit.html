<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>录入成绩</title>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../libs/h-ui/css/H-ui.min.css">
    <link rel="stylesheet" href="../libs/h-ui.admin/css/H-ui.admin.css">
    <link rel="stylesheet" href="../libs/Hui-iconfont/1.0.8/iconfont.css">
    <link rel="stylesheet" href="../libs/h-ui.admin/skin/default/skin.css" id="skin">
    <link rel="stylesheet" href="../libs/layui/css/layui.css">
    <link rel="stylesheet" type="text/css" href="../css/style.css">
</head>
<body>
<article class="page-container">
    <form class="form form-horizontal">
        <div class="row cl mt-5">
            <label class="form-label col-xs-1 col-sm-2 col-xs-offset-2 col-sm-offset-1">班级名称：</label>
            <div class="formControls col-xs-2 col-sm-3">
                <input type="text" class="input-text f-l" style="width: 90%">
                <span class="newer-necessary">*</span>
            </div>
            <label class="form-label col-xs-1 col-sm-2">考试日期：</label>
            <div class="formControls col-xs-2 col-sm-3 cl">
                <span class="select-box f-l" style="width: 90%">
                    <select class="select" size="1">
                        <option value="">请选择</option>
                        <option value="">w170902j</option>
                        <option value="">w170902j</option>
                    </select>
			    </span>
                <span class="newer-necessary">*</span>
            </div>
        </div>
        <hr>

        <div class="row cl" style="margin-top: 5px">
            <label class="form-label col-xs-1 col-sm-2 col-xs-offset-2 col-sm-offset-1">姓名：</label>
            <div class="formControls col-xs-2 col-sm-3 cl">
                <input type="text" class="input-text f-l" style="width: 90%">
                <span class="newer-necessary">*</span>
            </div>
            <label class="form-label col-xs-1 col-sm-2">学籍号：</label>
            <div class="formControls col-xs-2 col-sm-3 cl">
                <input type="text" class="input-text f-l" style="width: 90%">
                <span class="newer-necessary">*</span>
            </div>
        </div>

        <div class="row cl" style="margin-top: 5px">
            <label class="form-label col-xs-1 col-sm-2 col-xs-offset-2 col-sm-offset-1">笔试成绩：</label>
            <div class="formControls col-xs-2 col-sm-3 cl">
                <input type="text" class="input-text f-l" style="width: 90%">
            </div>
            <label class="form-label col-xs-1 col-sm-2">机试成绩：</label>
            <div class="formControls col-xs-2 col-sm-3">
                <input type="text" class="input-text f-l" style="width: 90%">
            </div>
        </div>

        <div class="row cl" style="margin-top: 5px">
            <div class="col-xs-8 col-sm-9 col-xs-offset-3 col-sm-offset-2 text-c">
                <input class="btn btn-primary radius" type="submit" value="&nbsp;&nbsp;提交&nbsp;&nbsp;">
                <input class="btn btn-default radius" type="reset" value="&nbsp;&nbsp;重置&nbsp;&nbsp;">
            </div>
        </div>
    </form>
</article>

<!--<script src="../js/jquery.validation/jquery.validate.js"></script>
<script src="../js/jquery.validation/validate-methods.js"></script>
<script src="../js/jquery.validation/messages_zh.js"></script>-->

<script type="text/javascript" src="../js/jquery.2.1.4.min.js"></script>
<script type="text/javascript" src="../libs/layui/layui.all.js"></script>
<script type="text/javascript" src="../libs/h-ui/js/H-ui.min.js"></script>
<script src="../libs/h-ui.admin/js/H-ui.admin.js"></script>
<!--<script src="../libs/layui/lay/modules/layer.js"></script>-->
<!--<script src="../libs/layer/2.4/layer.js"></script>-->
<script>
    $(window).on('load', () => {
        var id = localStorage.getItem("id")
        $("#id").val(id)
        localStorage.removeItem("id")

        $("#form-edit-user").validate({
            rules: {
                username: {
                    required: true
                },
                password: {
                    required: true
                },
                email: {
                    required: true
                }
            },
            onkeyup: false,
            focusCleanup: true,
            success: "valid",
            submitHandler: function (form) {
                var type = "post"
                if ($("#id").val() > 0) {
                    type = "put"
                }

                $.ajax({
                    type: type,
                    url: BANK_URL + "users",
                    data: JSON.stringify(getFormData($(form))),
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    headers: createAuthorizationTokenHeader(),
                    success: function (data) {
                        if (data) {
                            var index = parent.layer.getFrameIndex(window.name)
                            layer.msg("保存成功!", {icon: 1, time: 1000})

                            setTimeout(() => {
                                window.parent.location.reload()
                                parent.layer.close(index)
                            }, 800)
                        }
                    }
                })
            }
        })
    })
</script>
</body>
</html>